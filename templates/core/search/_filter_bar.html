{# Compact search bar with mobile filter button #}
<div class="mb-3">
    <form method="GET" action="{% url 'core:search' %}" class="mb-3">
        {# Mobile: Stack input on top, buttons below #}
        <div class="d-lg-none">
            {# Search input - full width on mobile #}
            <div class="mb-2">
                <input type="search"
                       name="q"
                       class="form-control form-control-lg"
                       placeholder="Ce serviciu cauți?"
                       value="{{ query }}"
                       list="popular-services-list">

                <datalist id="popular-services-list">
                    {% for service in popular_services|slice:":20" %}
                        <option value="{{ service.name }}">
                    {% endfor %}
                </datalist>
            </div>

            {# Buttons side by side below input #}
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary flex-fill">
                    <i class="fas fa-search me-1"></i>Caută
                </button>

                <button type="button"
                        class="btn btn-outline-secondary flex-fill"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#filtersOffcanvas"
                        aria-controls="filtersOffcanvas"
                        id="filterBtn">
                    <i class="fas fa-sliders-h me-1"></i><span id="filterBtnText">Filtrează</span>
                </button>
            </div>
        </div>

        {# Desktop: All on one row #}
        <div class="d-none d-lg-flex gap-2">
            <input type="search"
                   name="q"
                   class="form-control"
                   placeholder="Ce serviciu cauți?"
                   value="{{ query }}"
                   list="popular-services-list">

            <datalist id="popular-services-list">
                {% for service in popular_services|slice:":20" %}
                    <option value="{{ service.name }}">
                {% endfor %}
            </datalist>

            <button type="submit" class="btn btn-primary">
                <i class="fas fa-search me-1"></i>Caută
            </button>
        </div>
    </form>

    {# Active filter chips #}
    {% include "core/search/_filter_chips.html" %}
</div>
